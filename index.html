<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hammerhead | Functional Forge v8.0</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;600;900&display=swap" rel="stylesheet">
    <style>
        :root { --h-cyan: #00f2ff; --h-bg: #05070a; --h-card: rgba(13, 17, 23, 0.9); }
        body { background: var(--h-bg); color: #c9d1d9; font-family: 'Outfit', sans-serif; height: 100vh; margin: 0; overflow: hidden; }
        .grid-bg { position: fixed; inset: 0; z-index: -1; background-image: radial-gradient(circle at 2px 2px, rgba(0,242,255,0.05) 1px, transparent 0); background-size: 30px 30px; }
        
        /* ä½ˆå±€ */
        .page { display: none; height: 100vh; }
        .page.active { display: flex; flex-direction: column; }
        .main-container { display: grid; grid-template-columns: 350px 1fr 350px; flex: 1; overflow: hidden; }
        
        /* å·¦å´ï¼šæŒ‡ä»¤èˆ‡æ—¥èªŒ */
        .panel-left { background: var(--h-card); border-right: 1px solid rgba(255,255,255,0.05); display: flex; flex-direction: column; padding: 20px; }
        #log-window { flex: 1; background: #000; border-radius: 8px; padding: 15px; font-family: monospace; font-size: 0.8rem; overflow-y: auto; color: #888; border: 1px solid #1a1a1a; }
        .log-entry { margin-bottom: 5px; border-left: 2px solid transparent; padding-left: 8px; }
        .log-entry.info { border-left-color: var(--h-cyan); color: #fff; }

        /* ä¸­å¤®ï¼šæ¶æ§‹å¯è¦–åŒ– */
        .panel-mid { position: relative; background: radial-gradient(circle at center, #0d1117 0%, #05070a 100%); overflow: hidden; }
        .node-obj { position: absolute; background: rgba(0, 242, 255, 0.1); border: 1px solid var(--h-cyan); padding: 8px 16px; border-radius: 4px; font-size: 0.7rem; color: #fff; cursor: move; }

        /* å³å´ï¼šå³æ™‚é è¦½èˆ‡ä»£ç¢¼ */
        .panel-right { background: var(--h-card); border-left: 1px solid rgba(255,255,255,0.05); padding: 20px; display: flex; flex-direction: column; }
        .preview-window { flex: 1; background: #fff; border-radius: 20px; overflow-y: auto; color: #333; padding: 20px; border: 5px solid #1a1a1a; }
        .code-view { flex: 1; background: #1e1e1e; border-radius: 10px; padding: 15px; font-family: monospace; font-size: 0.7rem; color: #d4d4d4; display: none; overflow: auto; }

        /* é€šç”¨çµ„ä»¶ */
        .btn-h { background: var(--h-cyan); color: #000; font-weight: bold; border-radius: 5px; border: none; padding: 10px; width: 100%; transition: 0.3s; }
        .btn-h:hover { box-shadow: 0 0 15px var(--h-cyan); }
        .tab-btn { cursor: pointer; padding: 5px 15px; font-size: 0.8rem; color: #555; }
        .tab-btn.active { color: var(--h-cyan); border-bottom: 2px solid var(--h-cyan); }
    </style>
</head>
<body>

<div class="grid-bg"></div>

<nav class="p-3 border-bottom border-secondary d-flex justify-content-between align-items-center" style="background: rgba(0,0,0,0.5);">
    <div class="fw-bold text-white"><span style="color:var(--h-cyan)">HAMMERHEAD</span> FORGE v8.0</div>
    <div class="d-flex gap-3">
        <div class="tab-btn active" id="btn-preview" onclick="toggleView('preview')">PREVIEW</div>
        <div class="tab-btn" id="btn-code" onclick="toggleView('code')">SOURCE CODE</div>
    </div>
</nav>

<div class="main-container">
    <div class="panel-left">
        <div id="log-window">
            <div class="log-entry">> å¼•æ“å·²å°±ç·’...</div>
            <div class="log-entry">> ç­‰å¾…ç”¨æˆ¶èªæ„è¼¸å…¥...</div>
        </div>
        <textarea id="cmd-in" class="form-control bg-dark text-white border-0 mt-3" rows="3" placeholder="æè¿°æ‚¨çš„åŠŸèƒ½éœ€æ±‚..."></textarea>
        <button class="btn-h mt-2" onclick="processForge()">åŸ·è¡Œé‘„é€ </button>
    </div>

    <div class="panel-mid" id="canvas">
        <div style="position:absolute; top:10px; left:10px; color:rgba(255,255,255,0.1); font-size:0.6rem;">LOGIC TOPOLOGY</div>
    </div>

    <div class="panel-right">
        <div id="preview-area" class="preview-window">
            <h5 id="app-title">New Application</h5>
            <hr>
            <div id="app-content" class="small text-muted">ç›®å‰å°šç„¡ç”Ÿæˆçš„çµ„ä»¶ã€‚</div>
        </div>
        <pre id="code-area" class="code-view"></pre>
        <button class="btn btn-outline-light btn-sm mt-3" onclick="exportCode()">å°å‡ºå°ˆæ¡ˆ (ZIP)</button>
    </div>
</div>

<script>
    let components = [];

    function toggleView(type) {
        document.getElementById('preview-area').style.display = type === 'preview' ? 'block' : 'none';
        document.getElementById('code-area').style.display = type === 'code' ? 'block' : 'none';
        document.getElementById('btn-preview').classList.toggle('active', type === 'preview');
        document.getElementById('btn-code').classList.toggle('active', type === 'code');
    }

    function addLog(msg, type='normal') {
        const log = document.getElementById('log-window');
        log.innerHTML += `<div class="log-entry ${type}">> ${msg}</div>`;
        log.scrollTop = log.scrollHeight;
    }

    function processForge() {
        const input = document.getElementById('cmd-in').value.toLowerCase();
        if(!input) return;

        addLog(`åˆ†æèªæ„: "${input}"`, 'info');
        
        // ç°¡æ˜“æ˜ å°„å¼•æ“
        setTimeout(() => {
            if(input.includes('login')) createComp('Login Module', '<form class="p-3 border rounded"><h5>ç™»å…¥</h5><input class="form-control mb-2" placeholder="å¸³è™Ÿ"><button class="btn btn-primary w-100">é€å‡º</button></form>');
            if(input.includes('chart') || input.includes('åˆ†æ')) createComp('Analytics Chart', '<div class="p-3 bg-light border text-center">ğŸ“Š [åœ–è¡¨çµ„ä»¶æ¸²æŸ“ä¸­]</div>');
            if(input.includes('table')) createComp('Data Table', '<table class="table table-sm"><thead><tr><th>ID</th><th>é …ç›®</th></tr></thead><tbody><tr><td>1</td><td>ç¯„ä¾‹æ•¸æ“š</td></tr></tbody></table>');
            
            updateCode();
            addLog('é‘„é€ æˆåŠŸï¼šçµ„ä»¶å·²æ’å…¥ç”Ÿç”¢ç·šã€‚', 'info');
        }, 800);
        
        document.getElementById('cmd-in').value = '';
    }

    function createComp(name, html) {
        // æ›´æ–° UI
        components.push({name, html});
        document.getElementById('app-content').innerHTML = components.map(c => `<div class="mb-4">${c.html}</div>`).join('');
        
        // æ›´æ–°ç•«å¸ƒç¯€é»
        const node = document.createElement('div');
        node.className = 'node-obj';
        node.innerText = name;
        node.style.left = Math.random()*60 + 10 + '%';
        node.style.top = Math.random()*60 + 10 + '%';
        document.getElementById('canvas').appendChild(node);
    }

    function updateCode() {
        const code = `\n<div class="container">\n` + 
                     components.map(c => `  \n  ${c.html}`).join('\n') + 
                     `\n</div>`;
        document.getElementById('code-area').innerText = code;
    }

    function exportCode() {
        alert("æº–å‚™æ‰“åŒ…æºç¢¼...\n1. index.html\n2. assets/styles.css\n3. main.js\n\n(Alpha éšæ®µæš«ä¸é–‹æ”¾å¯¦é«”ä¸‹è¼‰)");
    }
</script>
</body>
</html>
